@()

<div id="taskform-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" ng-controller="TaskFormController">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Add Task</h4>
            </div>

            <form id="taskform" class="form-horizontal" method="POST" action="/api/todo">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="NewTaskName" class="control-label col-sm-2">
                            Name</label>
                        <div class="input-group">
                            <input name="name" id="NewTaskName" type="text" class="form-control" placeholder="Name" ng-model="name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="NewTaskDeadline" class="control-label col-sm-2">
                            Deadline</label>
                        <div class="input-group date" id="deadline-datetimepicker">
                            <input name="deadline" id="NewTaskDeadline" type="text" class="form-control" placeholder="Deadline" ng-model="deadline"/>
                            <span class="input-group-addon">
                                <div class="glyphicon glyphicon-calendar"></div>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="taskform-submit" type="button" class="btn btn-primary" ng-click="create()" data-toggle="modal" data-target="#taskform-modal">Create</button>
                </div>
            </form>
        </div>
    </div>
</div>


<script type="text/javascript">


    $(function () {
        $.fn.serializeFormJSON = function () {
            var o = {}
            var a = this.serializeArray()
            $.each(a, function () {
                if (o[this.name]) {
                    if (!o[this.name].push) {
                        o[this.name] = [o[this.name]]
                    }
                    o[this.name].push(this.value || '')
                } else {
                    o[this.name] = this.value || ''
                }
            })
            return o
        }

        $('#deadline-datetimepicker').datetimepicker()
/*
        $('#taskform-submit').click(
            function()
            {
                $.ajax('/api/todo', {
                    method: 'POST',
                    data: $('#taskform').serializeFormJSON(),
                    complete: function(xhr, status) {
                        $("#taskform-modal").modal('hide')
                    },
                    error: function(xhr, status) {
                        // TODO
                    }
                })
            }
        )
*/
    });
</script>

